<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <link href="https://fonts.googleapis.com/css?family=Lobster|Lobster+Two" rel="stylesheet">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
        for (i=0; i<window.geemails.length; i++){
          //console.log(geemails[i]);
          /*console.log(window.geemails.subject[i]);*/
          var createProfiles = document.createElement("div");
          createProfiles.className = "profiles";
          main.appendChild(createProfiles);

          var createDates = document.createElement("div");
          createDates.className = "dates";
          createDates.innerHTML = window.geemails[i].date;
          createProfiles.appendChild(createDates);

          var createSender = document.createElement("div");
          createSender.className = "senders";
          createSender.innerHTML = window.geemails[i].sender;
          createProfiles.appendChild(createSender);

          var createSub = document.createElement("div");
          createSub.className = "subjects";
          createSub.innerHTML = window.geemails[i].subject;
          createProfiles.appendChild(createSub);

          var createBody = document.createElement("div");
          createBody.className = "bodies";
          createBody.innerHTML = window.geemails[i].body;
          createProfiles.appendChild(createBody);
          var createHR = document.createElement("hr");
          createHR.className = "hrClass";
          createProfiles.appendChild(createHR);
        }

      var profileShowHide = document.getElementsByClassName("profiles");

      for(var j = 0; j<profileShowHide.length; j++){
        profileShowHide[j].addEventListener("click", showHide);
      }

      function showHide(){
        console.log("**", this);
        var hideMessage = this.querySelectorAll(".bodies")[0];
        if(hideMessage.style.display === "none"){
          hideMessage.style.display = "block";
        }else{
          hideMessage.style.display = "none";
        }
      }
      //console.log(setNewMessage.date);
    
    var msgText = document.createElement("div");
        msgText.className = "countContainer";
        msgText.id = "msgTag";
        msgText.innerHTML = "New messages: ";
        main.appendChild(msgText);
    var inboxCount = document.createElement("div");
    inboxCount.className = "countContainer";
    inboxCount.id = "inboxTag";
    main.appendChild(inboxCount);
    var createHr2 = document.createElement("hr");
    createHr2.className = "HRtag";
    main.appendChild(createHr2);

    function addNewMsg(){
      var setNewMessage = getNewMessage();
        //console.log('hkgkgjkgjgjg',setNewMessage);
      var newParent = document.createElement("div");
      newParent.className = "parentClass";
      main.appendChild(newParent);
      var newMsgDate = document.createElement("div");
      newMsgDate.className = "dates";
      newMsgDate.innerHTML = setNewMessage.date;
      newParent.appendChild(newMsgDate);
      var newMsgSub = document.createElement("div");
      newMsgSub.className = "subjects";
      newMsgSub.innerHTML = setNewMessage.subject;
      newParent.appendChild(newMsgSub);
      var newMsgSender = document.createElement("div");
      newMsgSender.className = "senders";
      newMsgSender.innerHTML = setNewMessage.sender;
      newParent.appendChild(newMsgSender);
      var newMsgBody = document.createElement("div");
      newMsgBody.className = "bodies";
      newMsgBody.innerHTML = setNewMessage.body;
      newParent.appendChild(newMsgBody);
        
      var newMsgShowHide = document.getElementsByClassName("parentClass");
        //console.log(newMsgShowHide.length);
      var createHR3 = document.createElement("hr");
      createHR3.className = "HRtag";
      main.appendChild(createHR3);


      for(var k = 0; k<newMsgShowHide.length; k++){
      //console.log("sfsef", newMsgShowHide.length);
      newMsgShowHide[k].addEventListener("click", showHideNewMsg)
        }
      
      inboxTag.innerHTML = window.geemails.length + newMsgShowHide.length;
      }
      
      setInterval(addNewMsg, 1000);

      function showHideNewMsg(){
        var hideMessage = this.querySelectorAll(".bodies")[0];
        console.log(this);
        if(hideMessage.style.display === "none"){
          hideMessage.style.display = "block";
        }else{
          hideMessage.style.display = "none";
        }
        //console.log("hello");

      }
      };
    </script>
	</head>
	<body>
  <header>Gee-mail App</header>
		<div class="container" id="main">
	
		</div>
	</body>
</html>